(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ZTKA:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),i=t("ZZ/e"),o=t("nk7c"),r=t("kyzu"),s=t("wp6h"),a=t("vglk"),c=function(){function n(n,l,t,e,u,i){this.loadingService=n,this.navCtrl=l,this.storage=t,this.pJService=e,this.alertService=u,this.modalController=i,this.pjsList=[],this.monsterNumber=1,this.order="init"}return n.prototype.ngOnInit=function(){return u.b(this,void 0,void 0,function(){return u.e(this,function(n){switch(n.label){case 0:return[4,this.getPjs()];case 1:return n.sent(),[2]}})})},n.prototype.getPjs=function(){return u.b(this,void 0,void 0,function(){var n,l,t,e=this;return u.e(this,function(u){switch(u.label){case 0:return this.pjsList=[],this.loading=this.loadingService.showLoading(),[4,this.storage.get("userUID")];case 1:return l=u.sent(),[4,this.storage.get("storyID")];case 2:return t=u.sent(),this.initID=l+t,[4,this.storage.get(this.initID)];case 3:return(n=u.sent())?(this.pjsList=n,[3,6]):[3,4];case 4:return[4,this.pJService.getPJsByStory(t,l)];case 5:(n=u.sent()).forEach(function(n){e.pjsList.push(n.character)}),u.label=6;case 6:return this.loading=this.loadingService.hideLoading(),[2]}})})},n.prototype.reset=function(){return u.b(this,void 0,void 0,function(){var n=this;return u.e(this,function(l){switch(l.label){case 0:return[4,this.alertService.showAlert("Are you sure?","Do you want to reset?, This process cannot be undone").then(function(l){return u.b(n,void 0,void 0,function(){var n,t,e=this;return u.e(this,function(u){switch(u.label){case 0:return l?(this.loading=this.loadingService.showLoading(),this.pjsList=[],[4,this.storage.get("userUID")]):[3,5];case 1:return n=u.sent(),[4,this.storage.get("storyID")];case 2:return t=u.sent(),[4,this.storage.remove(this.initID)];case 3:return u.sent(),[4,this.pJService.getPJsByStory(t,n)];case 4:u.sent().forEach(function(n){e.pjsList.push(n.character)}),this.loading=this.loadingService.hideLoading(),u.label=5;case 5:return[2]}})})})];case 1:return l.sent(),[2]}})})},n.prototype.damageEvent=function(n,l){var t=Number(l.value),e=document.getElementById(l.el.id);t>0&&(n.hp=n.hp-t,e.value="",this.storage.set(this.initID,this.pjsList))},n.prototype.healEvent=function(n,l){var t=Number(l.value),e=document.getElementById(l.el.id);t>0&&(n.hp=n.hp+Number(t),n.hp>n.maxHp&&(n.hp=n.maxHp),e.value="",this.storage.set(this.initID,this.pjsList))},n.prototype.addInit=function(n,l){var t=Number(l.value),e=document.getElementById(l.el.id);t>0&&t<=20&&(n.init=n.init+t,e.value="",this.storage.set(this.initID,this.pjsList))},n.prototype.deleteElement=function(n){return u.b(this,void 0,void 0,function(){var l=this;return u.e(this,function(t){switch(t.label){case 0:return[4,this.alertService.showAlert("Are you sure?","Do you want to delete <strong>"+n+"</strong>?, This process cannot be undone").then(function(t){t&&(l.pjsList.forEach(function(t,e){t.name===n&&l.pjsList.splice(e,1)}),l.storage.set(l.initID,l.pjsList))})];case 1:return t.sent(),[2]}})})},n.prototype.openGeneratedMonsterModal=function(){return u.b(this,void 0,void 0,function(){var n,l=this;return u.e(this,function(t){switch(t.label){case 0:return[4,this.modalController.create({component:s.a})];case 1:return(n=t.sent()).onDidDismiss().then(function(n){n.data&&l.generatedMonster(n.data)}),[4,n.present()];case 2:return t.sent(),[2]}})})},n.prototype.generatedMonster=function(n){if(1===n.numberMonster){var l=Math.floor(20*Math.random())+1;this.pjsList.push({name:n.nameMonster,init:l+n.initMonster,hp:n.healPointsMonster,maxHp:n.healPointsMonster,monster:!0})}else for(var t=0;t<n.numberMonster;t++){var e=n.nameMonster+" "+this.monsterNumber++;l=Math.floor(20*Math.random())+1,this.pjsList.push({name:e,init:l+n.initMonster,hp:n.healPointsMonster,maxHp:n.healPointsMonster,monster:!0})}this.storage.set(this.initID,this.pjsList)},n}(),b=function(){return function(){}}(),p=t("pMnS"),h=t("oBZk"),f=t("gIcY"),d=t("Ip0R"),g=function(){function n(){}var l;return l=n,n.isString=function(n){return"string"==typeof n||n instanceof String},n.caseInsensitiveSort=function(n,t){return l.isString(n)&&l.isString(t)?n.localeCompare(t):l.defaultCompare(n,t)},n.defaultCompare=function(n,l){return n===l?0:null==n?1:null==l?-1:n>l?1:-1},n.parseExpression=function(n){return(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".")},n.getValue=function(n,l){for(var t=0,e=l.length;t<e;++t){var u=l[t];if(!(u in n))return;n="function"==typeof n[u]?n[u]():n[u]}return n},n.setValue=function(n,l,t){var e;for(e=0;e<t.length-1;e++)n=n[t[e]];n[t[e]]=l},n.prototype.transform=function(n,l,t,e,u){return void 0===e&&(e=!1),n?Array.isArray(l)?this.multiExpressionTransform(n,l,t,e,u):Array.isArray(n)?this.sortArray(n.slice(),l,t,e,u):"object"==typeof n?this.transformObject(Object.assign({},n),l,t,e,u):n:n},n.prototype.sortArray=function(n,t,e,u,i){var o,r=t&&-1!==t.indexOf(".");r&&(t=l.parseExpression(t)),o=i&&"function"==typeof i?i:u?l.caseInsensitiveSort:l.defaultCompare;var s=n.sort(function(n,e){return t?r?o(l.getValue(n,t),l.getValue(e,t)):n&&e?o(n[t],e[t]):o(n,e):o(n,e)});return e?s.reverse():s},n.prototype.transformObject=function(n,t,e,u,i){var o=l.parseExpression(t),r=o.pop(),s=l.getValue(n,o);return Array.isArray(s)||(o.push(r),r=null,s=l.getValue(n,o)),s?(l.setValue(n,this.transform(s,r,e,u),o),n):n},n.prototype.multiExpressionTransform=function(n,l,t,e,u){var i=this;return void 0===e&&(e=!1),l.reverse().reduce(function(n,l){return i.transform(n,l,t,e,u)},n)},n}(),m=function(){return function(){}}(),v=t("iw74"),k=e.nb({encapsulation:0,styles:[["ion-item[_ngcontent-%COMP%]{--padding-start:0px!important;--border-style:none;--highlight-color-focused:none}ion-button[_ngcontent-%COMP%]{margin:0;--box-shadow:none}.init-btn[_ngcontent-%COMP%]{font-size:20px;height:70%;--border-radius:none}ion-input[_ngcontent-%COMP%]{border:1px solid #b4b4b4;--padding-top:none;--padding-bottom:none;height:70%;text-align:center}.row-style[_ngcontent-%COMP%]{border-bottom:1px solid #333}.hp-live[_ngcontent-%COMP%]{color:green}.hp-death[_ngcontent-%COMP%]{color:rgba(231,13,13,.719)}.hp-null[_ngcontent-%COMP%]{color:rgba(207,207,15,.719)}"]],data:{}});function x(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,8,"ion-item",[],null,null,null,h.I,h.n)),e.ob(1,49152,null,0,i.H,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,3,"ion-input",[["type","number"]],[[8,"id",0]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.zb(n,5)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==e.zb(n,5)._handleIonChange(t.target.value)&&u),u},h.H,h.m)),e.Db(5120,null,f.b,function(n){return[n]},[i.Jb]),e.ob(4,49152,[["init",4]],0,i.G,[e.h,e.k],{type:[0,"type"],value:[1,"value"]},null),e.ob(5,16384,null,0,i.Jb,[e.k],null,null),(n()(),e.pb(6,0,null,0,2,"ion-button",[["class","init-btn"],["color","medium"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.addInit(n.parent.context.$implicit,e.zb(n,4))&&u),u},h.x,h.c)),e.ob(7,49152,null,0,i.k,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.Gb(-1,0,[" + "]))],function(n,l){n(l,4,0,"number",e.zb(l,4)),n(l,7,0,"medium")},function(n,l){n(l,2,0,e.rb(1,"","initId"+l.parent.context.index,""))})}function y(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,3,"ion-item",[],null,null,null,h.I,h.n)),e.ob(1,49152,null,0,i.H,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,1,"ion-icon",[["class","text-danger h2"],["name","trash"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.deleteElement(n.parent.context.$implicit.name)&&e),e},h.G,h.l)),e.ob(3,49152,null,0,i.C,[e.h,e.k],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"trash")},null)}function I(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,44,"ion-row",[["class","row-style"]],null,null,null,h.K,h.p)),e.ob(1,49152,null,0,i.ib,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,4,"ion-col",[["size","4"]],null,null,null,h.A,h.f)),e.ob(3,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(4,0,null,0,2,"span",[],null,null,null,null,null)),(n()(),e.pb(5,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),e.Gb(6,null,["",""])),(n()(),e.pb(7,0,null,0,9,"ion-col",[["size","4"]],null,null,null,h.A,h.f)),e.ob(8,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(9,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),e.Gb(-1,null,["HP: "])),(n()(),e.pb(11,0,null,0,3,"span",[],null,null,null,null,null)),e.ob(12,278528,null,0,d.h,[e.s,e.t,e.k,e.D],{ngClass:[0,"ngClass"]},null),e.Cb(13,{"hp-live":0,"hp-death":1,"hp-null":2}),(n()(),e.Gb(14,null,[""," "])),(n()(),e.pb(15,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),e.Gb(16,null,["/ ",""])),(n()(),e.pb(17,0,null,0,5,"ion-col",[["size","4"]],null,null,null,h.A,h.f)),e.ob(18,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(19,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),e.Gb(-1,null,["Init: "])),(n()(),e.pb(21,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),e.Gb(22,null,["",""])),(n()(),e.pb(23,0,null,0,13,"ion-col",[["size","6"]],null,null,null,h.A,h.f)),e.ob(24,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(25,0,null,0,11,"ion-item",[],null,null,null,h.I,h.n)),e.ob(26,49152,null,0,i.H,[e.h,e.k],null,null),(n()(),e.pb(27,0,null,0,2,"ion-button",[["class","init-btn"],["color","success"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.healEvent(n.context.$implicit,e.zb(n,32))&&u),u},h.x,h.c)),e.ob(28,49152,null,0,i.k,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.Gb(-1,0,[" + "])),(n()(),e.pb(30,0,null,0,3,"ion-input",[["type","number"]],[[8,"id",0]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.zb(n,33)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==e.zb(n,33)._handleIonChange(t.target.value)&&u),u},h.H,h.m)),e.Db(5120,null,f.b,function(n){return[n]},[i.Jb]),e.ob(32,49152,[["hit",4]],0,i.G,[e.h,e.k],{type:[0,"type"],value:[1,"value"]},null),e.ob(33,16384,null,0,i.Jb,[e.k],null,null),(n()(),e.pb(34,0,null,0,2,"ion-button",[["class","init-btn"],["color","danger"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.damageEvent(n.context.$implicit,e.zb(n,32))&&u),u},h.x,h.c)),e.ob(35,49152,null,0,i.k,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.Gb(-1,0,[" - "])),(n()(),e.pb(37,0,null,0,3,"ion-col",[["size","4"]],null,null,null,h.A,h.f)),e.ob(38,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.gb(16777216,null,0,1,null,x)),e.ob(40,16384,null,0,d.j,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(n()(),e.pb(41,0,null,0,3,"ion-col",[["size","2"]],null,null,null,h.A,h.f)),e.ob(42,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.gb(16777216,null,0,1,null,y)),e.ob(44,16384,null,0,d.j,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(n,l){n(l,3,0,"4"),n(l,8,0,"4");var t=n(l,13,0,l.context.$implicit.hp>0,l.context.$implicit.hp<0,0===l.context.$implicit.hp);n(l,12,0,t),n(l,18,0,"4"),n(l,24,0,"6"),n(l,28,0,"success"),n(l,32,0,"number",e.zb(l,32)),n(l,35,0,"danger"),n(l,38,0,"4"),n(l,40,0,!l.context.$implicit.monster),n(l,42,0,"2"),n(l,44,0,l.context.$implicit.monster)},function(n,l){n(l,6,0,l.context.$implicit.name),n(l,14,0,l.context.$implicit.hp),n(l,16,0,l.context.$implicit.maxHp),n(l,22,0,l.context.$implicit.init),n(l,30,0,e.rb(1,"","hitId"+l.context.index,""))})}function z(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,11,"ion-header",[],null,null,null,h.F,h.k)),e.ob(1,49152,null,0,i.B,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,9,"ion-toolbar",[],null,null,null,h.P,h.u)),e.ob(3,49152,null,0,i.Bb,[e.h,e.k],null,null),(n()(),e.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,h.y,h.d)),e.ob(5,49152,null,0,i.l,[e.h,e.k],null,null),(n()(),e.pb(6,0,null,0,2,"ion-back-button",[["defaultHref","/story"]],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.zb(n,8).onClick(t)&&u),u},h.w,h.b)),e.ob(7,49152,null,0,i.g,[e.h,e.k],{defaultHref:[0,"defaultHref"]},null),e.ob(8,16384,null,0,i.h,[[2,i.hb],i.Hb],{defaultHref:[0,"defaultHref"]},null),(n()(),e.pb(9,0,null,0,2,"ion-title",[],null,null,null,h.O,h.t)),e.ob(10,49152,null,0,i.zb,[e.h,e.k],null,null),(n()(),e.Gb(-1,0,["Initiative"])),(n()(),e.pb(12,0,null,null,20,"ion-content",[],null,null,null,h.B,h.g)),e.ob(13,49152,null,0,i.u,[e.h,e.k],null,null),(n()(),e.pb(14,0,null,0,13,"ion-grid",[],null,null,null,h.E,h.j)),e.ob(15,49152,null,0,i.A,[e.h,e.k],null,null),(n()(),e.pb(16,0,null,0,11,"ion-row",[],null,null,null,h.K,h.p)),e.ob(17,49152,null,0,i.ib,[e.h,e.k],null,null),(n()(),e.pb(18,0,null,0,4,"ion-col",[["size","6"]],null,null,null,h.A,h.f)),e.ob(19,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(20,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.reset()&&e),e},h.x,h.c)),e.ob(21,49152,null,0,i.k,[e.h,e.k],{expand:[0,"expand"]},null),(n()(),e.Gb(-1,0,["Reset"])),(n()(),e.pb(23,0,null,0,4,"ion-col",[["size","6"]],null,null,null,h.A,h.f)),e.ob(24,49152,null,0,i.t,[e.h,e.k],{size:[0,"size"]},null),(n()(),e.pb(25,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.openGeneratedMonsterModal()&&e),e},h.x,h.c)),e.ob(26,49152,null,0,i.k,[e.h,e.k],{expand:[0,"expand"]},null),(n()(),e.Gb(-1,0,["Create monsters"])),(n()(),e.pb(28,0,null,0,4,"ion-grid",[],null,null,null,h.E,h.j)),e.ob(29,49152,null,0,i.A,[e.h,e.k],null,null),(n()(),e.gb(16777216,null,0,2,null,I)),e.ob(31,278528,null,0,d.i,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),e.Bb(0,g,[])],function(n,l){var t=l.component;n(l,7,0,"/story"),n(l,8,0,"/story"),n(l,19,0,"6"),n(l,21,0,"block"),n(l,24,0,"6"),n(l,26,0,"block"),n(l,31,0,e.Hb(l,31,0,e.zb(l,32).transform(t.pjsList,t.order,!0,!1)))},null)}function j(n){return e.Ib(0,[(n()(),e.pb(0,0,null,null,1,"app-init",[],null,null,null,z,k)),e.ob(1,114688,null,0,c,[a.a,i.Hb,v.b,o.a,r.a,i.Gb],null,null)],function(n,l){n(l,1,0)},null)}var M=e.lb("app-init",c,j,{},{},[]),C=t("ZYCi");t.d(l,"InitPageModuleNgFactory",function(){return w});var w=e.mb(b,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[p.a,M]],[3,e.j],e.x]),e.xb(4608,d.l,d.k,[e.u,[2,d.r]]),e.xb(4608,f.g,f.g,[]),e.xb(4608,i.b,i.b,[e.z,e.g]),e.xb(4608,i.Gb,i.Gb,[i.b,e.j,e.q,d.c]),e.xb(4608,i.Lb,i.Lb,[i.b,e.j,e.q,d.c]),e.xb(4608,g,g,[]),e.xb(1073742336,d.b,d.b,[]),e.xb(1073742336,f.f,f.f,[]),e.xb(1073742336,f.a,f.a,[]),e.xb(1073742336,i.Db,i.Db,[]),e.xb(1073742336,m,m,[]),e.xb(1073742336,C.o,C.o,[[2,C.u],[2,C.m]]),e.xb(1073742336,b,b,[]),e.xb(1024,C.k,function(){return[[{path:"",component:c}]]},[])])})}}]);